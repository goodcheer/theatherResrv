
<html>

<head>
<title> 영화.home </title>
<meta charset="utf-8">
<meta name="viewport" content="width=device-width, initial-scale=1">

<!-- W3school -->
<link rel="stylesheet" href="https://fonts.googleapis.com/css?family=Roboto">
<link rel="stylesheet" href="https://www.w3schools.com/w3css/4/w3.css">
<link rel="stylesheet" href="https://www.w3schools.com/lib/w3-theme-black.css">
<link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/4.7.0/css/font-awesome.min.css">

<!-- Swiper -->
<link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/Swiper/4.0.5/css/swiper.css">
<link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/Swiper/4.0.5/css/swiper.min.css">
<script src="https://cdnjs.cloudflare.com/ajax/libs/Swiper/4.0.5/js/swiper.js"></script>
<script src="https://cdnjs.cloudflare.com/ajax/libs/Swiper/4.0.5/js/swiper.min.js"></script>
<script src="https://cdnjs.cloudflare.com/ajax/libs/Swiper/4.0.5/js/swiper.jquery.js"></script>
<script src="https://cdnjs.cloudflare.com/ajax/libs/Swiper/4.0.5/js/swiper.jquery.min.js"></script>
<script src="https://code.jquery.com/jquery-2.1.4.js"></script>
<link rel="stylesheet" type="text/css" href="mystyle.css">

<style>


</style>

</head>

<body>

<!-- Sidebar 사이드바 -->
<div class="w3-sidebar w3-bar-block w3-card w3-animate-right" style="display:none;right:0;z-index:1001; background: rgba(0, 0, 0, 0.6);" id="rightMenu">
  <button onclick="closeRightMenu()" class="w3-bar-item w3-button w3-large">닫기 &times;</button>
	<div class="imgcontainer" style="margin-bottom: 3em;">
		<img src="profile/face.png" alt="문지기" class="avatar">
	</div>
  <form class="w3-light-grey" style="margin:auto !important; width:80% !important; border-radius:15px;">
	<div style="padding: 5px;">
	<a class="w3-button" style="width:100%; padding: 30px 30px; border-radius:15px" href="user_and_resv.html"> 내 정보 </a>
	<a class="w3-button" style="width:100%; padding: 30px 30px; border-radius:15px" href="main_client.html"> 메인 화면으로 </a>
	<a class="w3-button" style="width:100%; padding: 30px 30px; border-radius:15px" href="cancel_list.html"> 예약취소 </a>
	</div>

   </form>
       <p style="text-align:center; margin-top: 6em;">
        <a class="w3-button w3-red" id="sign-in-request" onclick="logout()">로그아웃</a>
    </p>

</div>
<script>
function logout(){
	sessionStorage.clear();
	location.href = "main.html";
}

var seatNum = [];

function getSeatNum(movieName){
	var booked = localStorage.getItem("booked");
	booked = JSON.parse(booked);
	var vacant = 143;
	for(i=0; i < booked.length; i++){
		if(booked[i] == movieName) vacant--;
	}
	seatNum.push(vacant.toString());
}
</script>

<!-- Header -->
<header class="w3-container w3-theme w3-padding" id="myHeader">
  <i onclick="openRightMenu()" class="fa fa-bars w3-xlarge w3-button w3-theme w3-right"></i>
  <div class="w3-center">
  <h1 class="w3-xxxlarge w3-animate-bottom">가상세계 매표소</h1>
  </div>
</header>

<script>
function openRightMenu() {
    var x = document.getElementById("rightMenu");
	x.style.width = "30%";
	x.style.display = "block";
}
function closeRightMenu() {
    document.getElementById("rightMenu").style.display = "none";
}

function movieLink(movieTitle) {
	console.log(movieTitle)
	sessionStorage.setItem('movieTitle',movieTitle);
}


</script>

<!-- Touch Slider -->

  <!-- Swiper -->
  <div class="swiper-container w3-theme" style="width:100%">
  	<h6 align=center>절찬리에 상영중</h6>
    <div class="swiper-wrapper" id = "swiper-wrapper">
     </div>
    <!-- Add Pagination -->
    <div class="swiper-pagination"></div>
  </div>

  <!-- Initialize Swiper -->
  <script>
    $( document ).ready(function(){
	  var movie = localStorage.getItem("movie");
	  movie = JSON.parse(movie);

	  var str = "";
	  var i = 0;
	  while(i < movie.length){
		getSeatNum(movie[i].movie_name);
	  	str = str + '<div class = "swiper-slide"> 잔여 좌석: '+ seatNum[i] + '석 <a onclick="movieLink(&#39;' + movie[i].movie_name + '&#39;)"\
		href= "thread.html"> <img src= "poster/' + movie[i].poster + '" width="100%"></a></div>';
		i++;
	  }
      $('#swiper-wrapper').html(str);
      <!-- Initialize Swiper -->
		var swiper = new Swiper('.swiper-container', {
			effect: 'coverflow',
			grabCursor: true,
			centeredSlides: true,
			slidesPerView: 'auto',
			coverflowEffect: {
				rotate: 50,
				stretch: 0,
				depth: 100,
				modifier: 1,
				slideShadows: true,
			},
			pagination: {
				el: '.swiper-pagination',
			},
		});
    });
  </script>

</body>
</html>
